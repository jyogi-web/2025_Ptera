# Ptera

# å®Œæˆå“

ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆ
<https://2025-ptera.vercel.app/>

# ã€ã‚¢ãƒ—ãƒªæ¦‚è¦ã€‘

ã‚µãƒ¼ã‚¯ãƒ«ã®éƒ¨å“¡ã‚’ã‚«ãƒ¼ãƒ‰åŒ–ã—ã¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ãã¾ã™
å†™çœŸã‚’æ’®ã£ã¦æƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã¨ã‚«ãƒ¼ãƒ‰åŒ–ã—ã¦ä¿å­˜
å¯¾æˆ¦æ©Ÿèƒ½ã‚‚å®Ÿè£…ã€QRã‚³ãƒ¼ãƒ‰ã§ãƒŸãƒ‹ã‚²ãƒ¼ãƒ å¯èƒ½ã§ã™

## ã“ã®ã‚¢ãƒ—ãƒªã®è‰¯ã•

- **ã‚µãƒ¼ã‚¯ãƒ«ãƒ¡ãƒ³ãƒãƒ¼ã®è³‡ç”£åŒ–**: ä»²é–“ã‚’ã‚«ãƒ¼ãƒ‰ã¨ã—ã¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨ã§ã€ã‚µãƒ¼ã‚¯ãƒ«ã¸ã®å¸°å±æ„è­˜ã‚’é«˜ã‚ã€äº¤æµã‚’å¯è¦–åŒ–ã§ãã‚‹ã¯ãšã€‚
- **AIã«ã‚ˆã‚‹ã‚¹ãƒãƒ¼ãƒˆãªç”Ÿæˆ**: é¢å€’ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ›ã¯AIã«ãŠä»»ã›ã€‚å†™çœŸã‹ã‚‰ãã®äººã®ç‰¹å¾´ã‚’æ‰ãˆãŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚
- **ã“ã ã‚ã‚Šã®ã‚µã‚¤ãƒãƒ¼UI**: Arwesãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é§†ä½¿ã—ãŸSFãƒãƒƒã‚¯ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã€ã‚«ãƒ¼ãƒ‰åé›†ã®æ²¡å…¥æ„Ÿã‚’é«˜ã‚ã¾ã™ã€‚
- **ã‚µãƒ¼ã‚¯ãƒ«å¯¾æŠ—ã®å¯¾æˆ¦**: ã‚µãƒ¼ã‚¯ãƒ«ã®å›£çµåŠ›ã‚’ä¸Šã’ã‚‹ã»ã‹ã€ä»–ã®å›£ä½“ã®ã“ã¨ã‚‚çŸ¥ã‚Œã‚‹å¯¾æˆ¦æ©Ÿèƒ½ã§ã™ã€‚
- **æ¨ã—éƒ¨å“¡**: æ¨ã—ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã‚„ã‚‹æ°—UPï¼
- **ãƒªã‚¢ãƒ«ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®èåˆ**: QRã‚³ãƒ¼ãƒ‰ã‚’ç”¨ã„ãŸå¯¾æˆ¦æ©Ÿèƒ½ã«ã‚ˆã‚Šã€å¯¾é¢ã§ã®é›†ã¾ã‚Šã‚’ã‚ˆã‚Šã‚¨ã‚­ã‚µã‚¤ãƒ†ã‚£ãƒ³ã‚°ãªã‚‚ã®ã«ã—ã¾ã™ã€‚

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼

1. ãƒ­ã‚°ã‚¤ãƒ³(Google)ã‚’è¡Œã†
2. ã‚µãƒ¼ã‚¯ãƒ«ã¸ã®å‚åŠ 
3. ã‚«ãƒ¼ãƒ‰åŒ–ã®ãŸã‚ã®å†™çœŸã‚’æ’®å½±ã¾ãŸã¯ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
4. å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›(å…¥åŠ›ã—ãªã‹ã£ãŸåˆ†ã¯AIè£œå®Œï¼‰
5. ã‚«ãƒ¼ãƒ‰åŒ–ï¼
6. ã‚µãƒ¼ã‚¯ãƒ«ãƒ¡ãƒ³ãƒãƒ¼ã§ãƒ‡ãƒƒã‚­ã‚’ä½œã£ã¦å¯¾æˆ¦ï¼

ãã®ä»–ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ã‚‚éŠã¹ã‚‹ï¼

- QRãƒ¡ãƒ³ã‚³
- æŒ‡ãƒãƒ³ãƒãƒ³

![image](https://ptera-publish.topaz.dev/project/01KCZFKMBM3TP22F7T56GXDVEA.png)

# æŠ€è¡“ã®è©±

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

### ä½¿ç”¨æŠ€è¡“

```
"next": "16.0.10",
"react": "19.2.1",
"tailwindcss": "^4",
"@arwes/react": "^1.0.0-next.25020502",
"firebase": "^12.6.0",
"firebase-admin": "^13.6.0",
"@connectrpc/connect": "^2.1.1",
"@connectrpc/connect-node": "^2.1.1",
"@bufbuild/protobuf": "^2.10.2",
"react-webcam": "^7.2.0",
"jsqr": "^1.4.0",
"qrcode": "^1.5.4",
"@biomejs/biome": "^2.3.10",
"vitest": "^4.0.15"
```

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

vercelãƒãƒ³ä¹—ã›ã§ã¯ãªãã€GithubActionsã‚’ç”¨ã„ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã„ã¾ã—ãŸï¼
Vercelã®ãƒãƒ¼ãƒ ã¯æœ‰æ–™ã§ã‚ã‚‹ãŸã‚ãƒ‡ãƒ—ãƒ­ã‚¤å‘¨ã‚Šã‚’ç®¡ç†è€…ã—ã‹è§¦ã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã›ã‚“ã§ã—ãŸãŒã€GithubActionsã§ç®¡ç†ã™ã‚‹ã“ã¨ã§ã„ã˜ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸ

<details>
<summary>deploy workflow</summary>

```yaml
name: CI/CD

on:
  push:
    branches:
      - main
    paths:
      - 'front/**'
  pull_request:
    paths:
      - 'front/**'

jobs:
  checks:
    runs-on: ubuntu-latest
    env:
      NEXT_PUBLIC_FIREBASE_API_KEY: ${{ secrets.NEXT_PUBLIC_FIREBASE_API_KEY }}
      NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN: ${{ secrets.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN }}
      NEXT_PUBLIC_FIREBASE_PROJECT_ID: ${{ secrets.NEXT_PUBLIC_FIREBASE_PROJECT_ID }}
      NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET: ${{ secrets.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET }}
      NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: ${{ secrets.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID }}
      NEXT_PUBLIC_FIREBASE_APP_ID: ${{ secrets.NEXT_PUBLIC_FIREBASE_APP_ID }}
      FIREBASE_SERVICE_ACCOUNT_KEY: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_KEY }}
    defaults:
      run:
        working-directory: front

    steps:
      - name: Check out the code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22'
          cache: 'npm'
          cache-dependency-path: front/package-lock.json

      - name: Install dependencies
        run: npm ci

      - name: Type check
        run: npx tsc --noEmit

      - name: Lint check
        run: npm run lint

      - name: Format check
        run: npm run format

      - name: Run tests
        run: npm run test

      - name: Build check
        run: npm run build

  deploy:
    needs: checks
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: front
    if: github.event_name == 'push' && github.ref == 'refs/heads/main'

    steps:
      - name: Check out the code
        uses: actions/checkout@v4

      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod'

```

</details>

## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

### gRPCã‚’ç”¨ã„ãŸãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯gRPCã‚’ç”¨ã„ãŸgoã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸ

```proto
service BattleService {
  rpc StartBattle(StartBattleRequest) returns (StartBattleResponse);
  rpc Attack(AttackRequest) returns (AttackResponse);
  rpc Retreat(RetreatRequest) returns (RetreatResponse);

  // Battle Request (Matching) RPCs
  rpc SendBattleRequest(SendBattleRequestRequest) returns (BattleRequest);
  rpc AcceptBattleRequest(AcceptBattleRequestRequest) returns (BattleState);
  rpc RejectBattleRequest(RejectBattleRequestRequest) returns (BattleRequest);
}
```

### ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒƒãƒ•ã‚¡ãƒ¼ã§ã®ç”Ÿæˆ

![image](https://ptera-publish.topaz.dev/project/01KCZG1EJ12G21WVHJRQADGA8V.png)

## é–‹ç™ºå‘¨ã‚Šã®è©±

### lefthookğŸ¤›å°å…¥ ã€œä½•ã‚’å››å¤©ç‹ï¼ã€œ

ã‚ã¡ã‚ƒãã¡ã‚ƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‹ã‘å¿˜ã‚Œãƒãƒ³ãªã®ã§pre-commitã‚’å°å…¥ã—ã¾ã—ãŸã€œ

```yaml
# Lefthook configuration for 2025_Ptera
# https://lefthook.dev/configuration/

pre-commit:
  parallel: true
  commands:
    lint:
      glob: "front/**/*.{js,ts,jsx,tsx}"
      run: cd front && npm run lint:fix
      stage_fixed: true

    format:
      glob: "front/**/*.{js,ts,jsx,tsx,json,md,yml,yaml}"
      run: cd front && npm run format:fix
      stage_fixed: true

    typescript:
      glob: "front/**/*.{ts,tsx}"
      run: cd front && npx tsc --noEmit --skipLibCheck

pre-push:
  commands:
    test:
      run: cd front && npm test
```

pre-commitã®ç®¡ç†ã«ã¯Lefthookã‚’å°å…¥ã—ã¦ã¿ã¦ã€çµæ§‹æ¥½ã«å°å…¥ã§ããŸã¨ã¨ã„ã†å°è±¡ã§ã™
<https://qiita.com/KOU050223/items/35cfaedefad2bc88a89d>

### [coderabbit](https://www.coderabbit.ai/ja)å°å…¥ ã€œãƒ¬ãƒ“ãƒ¥ãƒ¼å¤§è‡£ã€œ

coderabbitã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ä»¥ä¸‹ã®ç‚¹ã‚’ã‚«ãƒãƒ¼ã—ã¾ã—ãŸï¼

- è¤‡æ•°è¦–ç‚¹ã§ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼(`ã€‡ã€‡ã®è¦³ç‚¹ã«ã‚ˆã‚Šâœ–ï¸âœ–ï¸ã‚’æ”¹å–„ã—ã¾ã—ã‚‡ã†ï¼`)
- PRã®ã‚µãƒãƒªãƒ¼
- issueã®è©³ç´°ãªãƒ—ãƒ©ãƒ³ã‚’ç«‹ã¦ã¦ãã‚Œã‚‹
- @coderabbitaiã§å‘¼ã³å‡ºã—ã¦ä¼šè©±ï¼
- ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªã¯ç„¡æ–™ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã‚Œã‚‹

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã“ã‚Œã¯claudecodeãã‚“ã«drawioã§æ›¸ã„ã¦è‹¥å¹²ä¿®æ­£ã—ã¦ã¿ã¾ã—ãŸï¼
æœ€è¿‘Qiitaã‹Zennã§è¨˜äº‹ã‚’è¦‹ãŸã®ã§...

XMLã§ã‚ã‚Šã‹ã—ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é£Ÿã†...?

```text
draw.io ã§ã€‡ã€‡å›³ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ãã ã•ã„ã€‚

- mxGraphModel ã« defaultFontFamily="ãƒ•ã‚©ãƒ³ãƒˆå" ã‚’è¨­å®š
- ã™ã¹ã¦ã®ãƒ†ã‚­ã‚¹ãƒˆè¦ç´ ã® style ã« fontFamily=ãƒ•ã‚©ãƒ³ãƒˆå; ã‚’è¿½åŠ 
- ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã¯æ¨™æº–ã®1.5å€ (18pxç¨‹åº¦) ã‚’ä½¿ç”¨
- çŸ¢å°ã¯ XML ã®å…ˆé ­ã«é…ç½® (æœ€èƒŒé¢)
- çŸ¢å°ã¨ãƒ©ãƒ™ãƒ«ã¯ 20px ä»¥ä¸Šé›¢ã™
- æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã® width ã¯ååˆ†ã«ç¢ºä¿ (1æ–‡å­—ã‚ãŸã‚Š 30-40px)
- èƒŒæ™¯è‰²ã¯è¨­å®šã—ãªã„ (é€æ˜)
- page="0" ã‚’è¨­å®š
```

![image](https://ptera-publish.topaz.dev/project/01KCZFY7GBX8EVTB523FSJEW80.png)

## ã‚²ãƒ¼ãƒ 

### ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ 

## QRãƒ¡ãƒ³ã‚³è©³ç´°

## æŒ‡ãƒãƒ³ãƒãƒ³è©³ç´°

# ã“ã‚Œã‹ã‚‰ã®å±•æœ›

- ã»ã’ã»ã’
